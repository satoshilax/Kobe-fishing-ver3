<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥æˆ¸é‡£ã‚Šæƒ…å ± v5.0 - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç‰ˆ</title>
    <style>
        :root {
            --primary: #0891b2;
            --success: #22c55e;
            --warning: #fb923c;
            --bg: #f8fafc;
            --card: white;
            --text: #0f172a;
            --text-light: #64748b;
        }
        
        [data-theme="dark"] {
            --primary: #38bdf8;
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f1f5f9;
            --text-light: #94a3b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            padding: 16px;
            padding-bottom: 80px;
            transition: all 0.3s;
        }
        
        .header {
            background: var(--card);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            text-align: center;
        }
        
        .header h1 {
            color: var(--primary);
            font-size: 24px;
        }
        
        .update-badge {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            margin-top: 8px;
        }
        
        .theme-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
        }
        
        .section {
            background: var(--card);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .section-title {
            color: var(--primary);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .ai-section {
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            color: white;
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 16px;
        }
        
        .rec-spot {
            background: rgba(255, 255, 255, 0.15);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
        }
        
        .rec-spot-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .rec-reason {
            font-size: 14px;
            opacity: 0.95;
            margin-bottom: 12px;
            line-height: 1.6;
        }
        
        .rec-details {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 14px;
            line-height: 1.8;
        }
        
        .rec-gear {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.8;
        }
        
        .confidence {
            display: inline-block;
            background: rgba(34, 197, 94, 0.3);
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            margin-top: 8px;
        }
        
        .weather-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        
        .weather-card {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: white;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }
        
        .weather-icon {
            font-size: 32px;
            margin: 8px 0;
        }
        
        .weather-temp {
            font-size: 24px;
            font-weight: 700;
            margin: 8px 0;
        }
        
        .moon-phase {
            background: linear-gradient(135deg, #6366f1, #4f46e5);
            color: white;
            padding: 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .moon-icon {
            font-size: 48px;
        }
        
        .moon-name {
            font-size: 18px;
            font-weight: 600;
        }
        
        .spot-card {
            background: var(--bg);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            border-left: 4px solid var(--primary);
        }
        
        .spot-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 8px;
        }
        
        .spot-name {
            font-size: 16px;
            font-weight: 600;
        }
        
        .spot-distance {
            color: var(--text-light);
            font-size: 13px;
            background: rgba(0,0,0,0.05);
            padding: 4px 10px;
            border-radius: 12px;
        }
        
        .spot-area {
            display: inline-block;
            background: #e0f2fe;
            color: #0369a1;
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 12px;
            margin-bottom: 8px;
        }
        
        .spot-info {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 12px;
        }
        
        .catch-item {
            background: #f0fdf4;
            border-left: 3px solid var(--success);
            padding: 12px;
            border-radius: 8px;
            margin-top: 8px;
        }
        
        .catch-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .catch-fish {
            color: #15803d;
            font-weight: 600;
            font-size: 14px;
        }
        
        .catch-time {
            color: #86efac;
            font-size: 11px;
        }
        
        .catch-details {
            color: #16a34a;
            font-size: 12px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }
        
        .error {
            background: #fee2e2;
            color: #991b1b;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-light);
            font-size: 11px;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="theme-btn" onclick="toggleTheme()">ğŸŒ“</button>
        <h1>ğŸ£ ç¥æˆ¸é‡£ã‚Šæƒ…å ± v5.0</h1>
        <div style="color: var(--text-light); font-size: 14px; margin-top: 4px;">
            ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é‡£æœé…ä¿¡
        </div>
        <div class="update-badge" id="last-update">ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>

    <div id="content">
        <div class="loading">ğŸ“¡ é‡£æœãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...</div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active">
            <div style="font-size: 24px;">ğŸ </div>
            <div>ãƒ›ãƒ¼ãƒ </div>
        </div>
        <div class="nav-item">
            <div style="font-size: 24px;">ğŸ—ºï¸</div>
            <div>ãƒãƒƒãƒ—</div>
        </div>
        <div class="nav-item">
            <div style="font-size: 24px;">ğŸ“Š</div>
            <div>çµ±è¨ˆ</div>
        </div>
        <div class="nav-item">
            <div style="font-size: 24px;">âš™ï¸</div>
            <div>è¨­å®š</div>
        </div>
    </div>

    <script>
        // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            html.setAttribute('data-theme', current === 'dark' ? '' : 'dark');
            localStorage.setItem('theme', current === 'dark' ? 'light' : 'dark');
        }
        
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
        
        // ã‚¹ãƒãƒ¼ãƒˆAIäºˆæ¸¬ï¼ˆéå»ãƒ‡ãƒ¼ã‚¿ + å¤©æ°— + æ½®æ±è€ƒæ…®ï¼‰
        function generateSmartPrediction(data) {
            const tomorrow = data.weatherForecast[1]; // æ˜æ—¥ã®å¤©æ°—
            const tide = data.moonPhase.tide;
            const historical = data.historicalData || {};
            
            // å¤©æ°—ã¨æ½®æ±ã«ã‚ˆã‚‹è£œæ­£
            let weatherBonus = 1.0;
            if (tomorrow.condition === 'æ™´ã‚Œ') weatherBonus = 1.2;
            if (tomorrow.condition === 'æ›‡ã‚Š') weatherBonus = 1.0;
            if (tomorrow.condition === 'é›¨' && parseInt(tomorrow.rain) < 50) weatherBonus = 0.9;
            if (tomorrow.condition === 'é›¨' && parseInt(tomorrow.rain) >= 50) weatherBonus = 0.6;
            
            let tideBonus = 1.0;
            if (tide === 'å¤§æ½®') tideBonus = 1.3;
            if (tide === 'ä¸­æ½®') tideBonus = 1.1;
            if (tide === 'å°æ½®') tideBonus = 0.9;
            if (tide === 'é•·æ½®') tideBonus = 0.8;
            
            // å„ã‚¹ãƒãƒƒãƒˆã‚’ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
            let bestPrediction = null;
            let maxScore = 0;
            
            data.spots.forEach(spot => {
                if (!spot.catches || spot.catches.length === 0) return;
                
                // æœ€è¿‘ã®é‡£æœã‚’åˆ†æ
                const recentCatch = spot.catches[0];
                let score = recentCatch.count * weatherBonus * tideBonus;
                
                // éå»ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Œã°æ´»ç”¨
                if (historical[spot.name]) {
                    const hist = historical[spot.name];
                    const period = Object.keys(hist)[0];
                    const fishData = hist[period][recentCatch.fish];
                    
                    if (fishData) {
                        score *= 1.2; // éå»ãƒ‡ãƒ¼ã‚¿ã‚ã‚Šãƒœãƒ¼ãƒŠã‚¹
                    }
                }
                
                if (score > maxScore) {
                    maxScore = score;
                    
                    // éå»ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç¯„å›²ã‚’å–å¾—
                    let minSize = recentCatch.size - 3;
                    let maxSize = recentCatch.size + 5;
                    let minCount = Math.floor(recentCatch.count * 0.7 * weatherBonus * tideBonus);
                    let maxCount = Math.ceil(recentCatch.count * 1.2 * weatherBonus * tideBonus);
                    
                    if (historical[spot.name]) {
                        const hist = historical[spot.name];
                        const period = Object.keys(hist)[0];
                        const fishData = hist[period][recentCatch.fish];
                        
                        if (fishData) {
                            minSize = fishData.minSize;
                            maxSize = fishData.maxSize;
                            minCount = Math.floor(fishData.avgCount * 0.7 * weatherBonus * tideBonus);
                            maxCount = Math.ceil(fishData.avgCount * 1.3 * weatherBonus * tideBonus);
                        }
                    }
                    
                    // ç†ç”±ã‚’ç”Ÿæˆ
                    let reason = `éå»ã®å®Ÿé‡£æœãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€æ˜æ—¥ã¯${recentCatch.fish}ãŒç‹™ã„ç›®ï¼`;
                    if (tomorrow.condition === 'æ™´ã‚Œ') reason += ' æ™´å¤©ã§æ´»æ€§ãŒä¸ŠãŒã‚‹è¦‹è¾¼ã¿ã€‚';
                    if (tide === 'å¤§æ½®') reason += ' å¤§æ½®ã§æ½®ãŒè‰¯ãå‹•ãå¥½æ¡ä»¶ã€‚';
                    if (tide === 'å°æ½®') reason += ' å°æ½®ã ãŒå®Ÿç¸¾ã®ã‚ã‚‹é‡£ã‚Šå ´ã§ã™ã€‚';
                    
                    // ãƒ™ã‚¹ãƒˆã‚¿ã‚¤ãƒ 
                    let bestTime = 'æœã¾ãšã‚ 06:00-08:00';
                    if (historical[spot.name]) {
                        const hist = historical[spot.name];
                        const period = Object.keys(hist)[0];
                        const fishData = hist[period][recentCatch.fish];
                        if (fishData && fishData.bestTime) {
                            if (fishData.bestTime.includes('æœ')) bestTime = 'æœã¾ãšã‚ 06:00-08:00';
                            if (fishData.bestTime.includes('å¤•')) bestTime = 'å¤•ã¾ãšã‚ 16:00-18:00';
                            if (fishData.bestTime.includes('æœ/å¤•')) bestTime = 'æœã¾ãšã‚ 06:00-08:00 / å¤•ã¾ãšã‚ 16:00-18:00';
                        }
                    }
                    
                    // ãƒ†ã‚£ãƒƒãƒ—ã‚¹
                    let tip = 'å®Ÿç¸¾ã®ã‚ã‚‹é‡£ã‚Šæ–¹ã§ã™';
                    if (recentCatch.method === 'ã‚µãƒ“ã‚­') tip = 'æœãƒã‚ºãƒ¡ãŒç‰¹ã«å¥½èª¿ã€‚ã‚¢ãƒŸã‚¨ãƒ“ã‚’ã—ã£ã‹ã‚Šæ’’ãã¾ã—ã‚‡ã†';
                    if (recentCatch.method === 'ã‚¨ãƒ“æ’’ãé‡£ã‚Š') tip = 'ã‚·ãƒ©ã‚µã‚¨ãƒ“ã‚’1æ™‚é–“1æ¯ãŒç›®å®‰ã€‚åº•ã‚’ç‹™ã„ã¾ã—ã‚‡ã†';
                    if (recentCatch.method === 'ãƒ•ã‚«ã‚»é‡£ã‚Š') tip = 'ã‚ªã‚­ã‚¢ãƒŸ+é…åˆã‚¨ã‚µã§ã€‚åº•ãƒˆãƒ³ãƒˆãƒ³ãŒåŠ¹æœçš„';
                    
                    // ä¿¡é ¼åº¦è¨ˆç®—
                    let confidence = 75;
                    if (historical[spot.name]) confidence += 15;
                    if (tide === 'å¤§æ½®' || tide === 'ä¸­æ½®') confidence += 10;
                    if (tomorrow.condition === 'æ™´ã‚Œ') confidence += 5;
                    if (confidence > 95) confidence = 95;
                    
                    bestPrediction = {
                        spot: spot.name,
                        fish: recentCatch.fish,
                        minSize, maxSize,
                        minCount, maxCount,
                        method: recentCatch.method,
                        reason,
                        bestTime,
                        tip,
                        confidence,
                        dataPoints: spot.catches.length * 10 // å®Ÿé‡£æœãƒ‡ãƒ¼ã‚¿æ•°ã®æ¦‚ç®—
                    };
                }
            });
            
            // é€±æœ«äºˆæ¸¬ã‚‚ç”Ÿæˆ
            if (bestPrediction) {
                const today = new Date();
                const dayOfWeek = today.getDay();
                
                if (dayOfWeek >= 3 && dayOfWeek <= 6) { // æ°´æ›œã€œåœŸæ›œãªã‚‰é€±æœ«äºˆæ¸¬ã‚’è¡¨ç¤º
                    // å—èŠ¦å±‹æµœã®ãƒãƒŒã‚’é€±æœ«ã®ãŠã™ã™ã‚ã«
                    const ashiyaspot = data.spots.find(s => s.name === 'å—èŠ¦å±‹æµœ');
                    if (ashiyaspot && historical['å—èŠ¦å±‹æµœ']) {
                        const hist = historical['å—èŠ¦å±‹æµœ']['1-2æœˆ'];
                        const chinuData = hist['ãƒãƒŒ'];
                        
                        bestPrediction.weekend = {
                            spot: 'å—èŠ¦å±‹æµœ',
                            fish: 'ãƒãƒŒ',
                            minSize: chinuData.minSize,
                            maxSize: chinuData.maxSize,
                            method: chinuData.method,
                            reason: 'é€±æœ«ã¯æ™‚é–“ã‚’ã‹ã‘ã¦å¤§ç‰©ç‹™ã„ï¼éå»ãƒ‡ãƒ¼ã‚¿ã§ã¯30-48cmã®å®Ÿç¸¾å¤šæ•°ã€‚',
                            confidence: 85
                        };
                    }
                }
            }
            
            return bestPrediction || {
                spot: data.spots[0].name,
                fish: data.spots[0].catches[0].fish,
                minSize: data.spots[0].catches[0].size - 2,
                maxSize: data.spots[0].catches[0].size + 3,
                minCount: Math.floor(data.spots[0].catches[0].count * 0.8),
                maxCount: data.spots[0].catches[0].count,
                method: data.spots[0].catches[0].method,
                reason: 'æœ€æ–°ã®é‡£æœãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åˆ†æ',
                bestTime: 'æœã¾ãšã‚ 06:00-08:00',
                tip: 'å®Ÿç¸¾ã®ã‚ã‚‹é‡£ã‚Šæ–¹ã§ã™',
                confidence: 75,
                dataPoints: 10
            };
        }
        
        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        async function loadFishingData() {
            try {
                // GitHubä¸Šã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
                // æœ¬ç•ªç’°å¢ƒã§ã¯ã“ã®URLã‚’å®Ÿéš›ã®GitHub URLã«å¤‰æ›´
                const response = await fetch('fishing-data.json');
                
                if (!response.ok) {
                    throw new Error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
                
                const data = await response.json();
                renderContent(data);
                updateLastUpdate(data.lastUpdated);
                
            } catch (error) {
                console.error('Error loading data:', error);
                showError();
            }
        }
        
        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤º
        function renderContent(data) {
            const content = document.getElementById('content');
            
            // AIäºˆæ¸¬ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆéå»ãƒ‡ãƒ¼ã‚¿ + å¤©æ°— + æ½®æ±è€ƒæ…®ï¼‰
            const prediction = generateSmartPrediction(data);
            
            let html = `
                <!-- AIäºˆæ¸¬ -->
                <div class="ai-section">
                    <div class="section-title" style="color: white;">ğŸ¤– AIé‡£æœäºˆæ¸¬ï¼ˆéå»ãƒ‡ãƒ¼ã‚¿åˆ†æ + å¤©æ°—ãƒ»æ½®æ±è€ƒæ…®ï¼‰</div>
                    
                    <div class="rec-spot">
                        <div class="rec-spot-name">ğŸ† æ˜æ—¥ã®ãŠã™ã™ã‚ï¼š${prediction.spot}</div>
                        <div class="rec-reason">
                            ${prediction.reason}
                        </div>
                        <div class="rec-details">
                            <strong>ç‹™ã„ç›®æ™‚é–“ï¼š</strong>${prediction.bestTime}<br>
                            <strong>äºˆæƒ³é‡£æœï¼š</strong>${prediction.fish} ${prediction.minCount}-${prediction.maxCount}åŒ¹<br>
                            <strong>äºˆæƒ³ã‚µã‚¤ã‚ºï¼š</strong>${prediction.minSize}-${prediction.maxSize}cm
                        </div>
                        <div class="rec-gear">
                            <strong>ãŠã™ã™ã‚ä»•æ›ã‘ï¼š</strong><br>
                            â€¢ ${prediction.method}<br>
                            â€¢ ${prediction.tip}
                        </div>
                        <div class="confidence">ä¿¡é ¼åº¦: ${prediction.confidence}%ï¼ˆéå»${prediction.dataPoints}ä»¶ã®å®Ÿé‡£æœãƒ™ãƒ¼ã‚¹ï¼‰</div>
                    </div>
                    
                    ${prediction.weekend ? `
                    <div class="rec-spot" style="margin-top: 16px; background: rgba(255,255,255,0.15);">
                        <div class="rec-spot-name">ğŸ“… é€±æœ«ï¼ˆåœŸæ—¥ï¼‰ã®ãŠã™ã™ã‚</div>
                        <div class="rec-reason">
                            ${prediction.weekend.reason}
                        </div>
                        <div class="rec-details">
                            <strong>ç‹™ã„ç›®ï¼š</strong>${prediction.weekend.fish} (${prediction.weekend.minSize}-${prediction.weekend.maxSize}cm)<br>
                            <strong>å ´æ‰€ï¼š</strong>${prediction.weekend.spot}<br>
                            <strong>é‡£æ³•ï¼š</strong>${prediction.weekend.method}
                        </div>
                        <div class="confidence">ä¿¡é ¼åº¦: ${prediction.weekend.confidence}%</div>
                    </div>
                    ` : ''}
                </div>
                
                <!-- å¤©æ°—äºˆå ± -->
                <div class="section">
                    <div class="section-title">ğŸŒ¤ï¸ 3æ—¥é–“ã®å¤©æ°—äºˆå ±</div>
                    <div class="weather-grid">
            `;
            
            data.weatherForecast.forEach(weather => {
                html += `
                    <div class="weather-card">
                        <div style="font-size: 12px; opacity: 0.9;">${weather.date}</div>
                        <div class="weather-icon">${weather.icon}</div>
                        <div class="weather-temp">${weather.temp}Â°C</div>
                        <div style="font-size: 13px;">${weather.condition}</div>
                        <div style="font-size: 11px; margin-top: 8px; opacity: 0.8;">
                            é¢¨: ${weather.wind}<br>
                            é™æ°´: ${weather.rain}
                        </div>
                    </div>
                `;
            });
            
            html += `
                    </div>
                </div>
                
                <!-- æœˆé½¢ -->
                <div class="section">
                    <div class="section-title">ğŸŒ™ æœˆé½¢ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</div>
                    <div class="moon-phase">
                        <div class="moon-icon">${data.moonPhase.icon}</div>
                        <div>
                            <div class="moon-name">${data.moonPhase.name}ï¼ˆ${data.moonPhase.age}æ—¥ï¼‰</div>
                            <div style="font-size: 14px; opacity: 0.9; margin-top: 4px;">${data.moonPhase.tide} - ${data.moonPhase.fishing}</div>
                            <div style="font-size: 12px; opacity: 0.8; margin-top: 8px;">
                                æ¬¡ã®å¤§æ½®: ${data.moonPhase.nextBigTide}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é‡£æœ -->
                <div class="section">
                    <div class="section-title">ğŸ“ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é‡£æœæƒ…å ±</div>
            `;
            
            // ã‚¨ãƒªã‚¢åˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
            const areas = ['ç¥æˆ¸', 'æ˜çŸ³', 'å°¼å´'];
            areas.forEach(area => {
                const areaSpots = data.spots.filter(spot => spot.area === area);
                if (areaSpots.length > 0) {
                    html += `<div style="color: var(--primary); font-size: 16px; font-weight: 600; margin: 20px 0 12px 0;">${area}ã‚¨ãƒªã‚¢</div>`;
                    
                    areaSpots.forEach(spot => {
                        html += `
                            <div class="spot-card">
                                <div class="spot-area">${spot.area}</div>
                                <div class="spot-header">
                                    <div class="spot-name">${spot.name}</div>
                                    <div class="spot-distance">${spot.distance}km</div>
                                </div>
                                <div class="spot-info">${spot.info}</div>
                        `;
                        
                        spot.catches.forEach(catch_ => {
                            const unit = catch_.fish === 'ã‚¿ã‚³' || catch_.fish === 'ã‚¢ã‚ªãƒªã‚¤ã‚«' ? 'g' : 'cm';
                            html += `
                                <div class="catch-item">
                                    <div class="catch-header">
                                        <div class="catch-fish">ğŸŸ ${catch_.fish} ${catch_.size}${unit}${catch_.count > 1 ? ` Ã— ${catch_.count}åŒ¹` : ''}</div>
                                        <div class="catch-time">${catch_.time}</div>
                                    </div>
                                    <div class="catch-details">
                                        ${catch_.user}ã•ã‚“ | ${catch_.method}
                                    </div>
                                </div>
                            `;
                        });
                        
                        html += `</div>`;
                    });
                }
            });
            
            html += `</div>`;
            
            content.innerHTML = html;
        }
        
        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showError() {
            const content = document.getElementById('content');
            content.innerHTML = `
                <div class="error">
                    âš ï¸ ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>
                    ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
                </div>
            `;
        }
        
        // æœ€çµ‚æ›´æ–°æ™‚åˆ»è¡¨ç¤º
        function updateLastUpdate(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = Math.floor((now - date) / 1000 / 60); // åˆ†
            
            let timeAgo;
            if (diff < 60) {
                timeAgo = `${diff}åˆ†å‰æ›´æ–°`;
            } else if (diff < 1440) {
                timeAgo = `${Math.floor(diff / 60)}æ™‚é–“å‰æ›´æ–°`;
            } else {
                timeAgo = `${Math.floor(diff / 1440)}æ—¥å‰æ›´æ–°`;
            }
            
            document.getElementById('last-update').textContent = `âœ… ${timeAgo}`;
        }
        
        // è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆ5åˆ†ã”ã¨ï¼‰
        setInterval(() => {
            loadFishingData();
        }, 5 * 60 * 1000);
        
        // åˆå›èª­ã¿è¾¼ã¿
        window.addEventListener('load', loadFishingData);
    </script>
</body>
</html>
